<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Ruby | Awesome Web Blog]]></title>
  <link href="http://anoobbava.github.io/blog/categories/ruby/atom.xml" rel="self"/>
  <link href="http://anoobbava.github.io/"/>
  <updated>2018-04-12T17:26:04+05:30</updated>
  <id>http://anoobbava.github.io/</id>
  <author>
    <name><![CDATA[Anoob Bava]]></name>
    <email><![CDATA[anoob.bava@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Install Ruby and Postgres to GCP:Series2]]></title>
    <link href="http://anoobbava.github.io/blog/2018/04/12/install-ruby-and-postgres-to-gcp-series2/"/>
    <updated>2018-04-12T15:51:22+05:30</updated>
    <id>http://anoobbava.github.io/blog/2018/04/12/install-ruby-and-postgres-to-gcp-series2</id>
    <content type="html"><![CDATA[<p>Hi All, Welcome to series 2, here are explaining about the ruby and Postgres installation to our GCP Server. If you know about that in linux 16.04 version, you can skip this tutorial. this is entirely based on the ubuntu 16.04 LTS machine and not much . I read the digital ocean, GoRails etc to publish this article and use the tehniques explained by them also.</p>

<h2>Install Ruby</h2>

<p>  first need to connect to our GCP using pem file.</p>

<p>  <img src="/images/series2/0.png" width="800" height="400"></p>

<h3>Install RVM</h3>

<h4>connect gpg keys</h4>

<p>  <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gpg &ndash;keyserver hkp://keys.gnupg.net &ndash;recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB</span></code></pre></td></tr></table></div></figure></p>

<p>  <img src="/images/series2/2.png" width="800" height="400"></p>

<h4>Install curl</h4>

<p>  install curl if not installed</p>

<p>  <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo apt-get install curl</span></code></pre></td></tr></table></div></figure></p>

<p>  <img src="/images/series2/3.png" width="800" height="400"></p>

<h4>Use curl for rvm script</h4>

<p>  Now use the curl to install the rvm script</p>

<p>  <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>\curl -sSL &lt;a href="https://get.rvm.io">https://get.rvm.io&lt;/a> -o rvm.sh</span></code></pre></td></tr></table></div></figure></p>

<p>  <img src="/images/series2/4.png" width="800" height="400"></p>

<h4>Install RVM</h4>

<p>  Now, the below command installs the latest version of the rvm and does all the depandancies.</p>

<p>  <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cat rvm.sh | bash -s stable</span></code></pre></td></tr></table></div></figure></p>

<p>  <img src="/images/series2/5.png" width="800" height="400">
  Now, install the lates version of Ruby, using the below command</p>

<h4>Install latest Ruby</h4>

<p>  <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rvm install ruby &ndash;default</span></code></pre></td></tr></table></div></figure></p>

<p>  <img src="/images/series2/7.png" width="800" height="400"></p>

<h4>check the ruby Version</h4>

<p>  <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ruby -v</span></code></pre></td></tr></table></div></figure></p>

<p>  <img src="/images/series2/8.png" width="800" height="400"></p>

<h2>Install Postgres</h2>

<p>  execute the below commands one by one</p>

<p>  <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo sh -c &ldquo;echo &lsquo;deb &lt;a href="http://apt.postgresql.org/pub/repos/apt/">http://apt.postgresql.org/pub/repos/apt/&lt;/a> xenial-pgdg main&rsquo; > /etc/apt/sources.list.d/pgdg.list&rdquo;
</span><span class='line'>    wget &ndash;quiet -O - &lt;a href="http://apt.postgresql.org/pub/repos/apt/ACCC4CF8.asc">http://apt.postgresql.org/pub/repos/apt/ACCC4CF8.asc&lt;/a> | sudo apt-key add -
</span><span class='line'>    sudo apt-get update
</span><span class='line'>    sudo apt-get install postgresql-common
</span><span class='line'>    sudo apt-get install postgresql-9.5 libpq-dev</span></code></pre></td></tr></table></div></figure></p>

<p>  <img src="/images/series2/9.png" width="800" height="400">
  <img src="/images/series2/10.png" width="800" height="400">
  <img src="/images/series2/11.png" width="800" height="400">
  <img src="/images/series2/12.png" width="800" height="400">
  <img src="/images/series2/13.png" width="800" height="400"></p>

<h4>Roles in postgres</h4>

<p>  by default postgres create a root user called role here is &ldquo;postgres&rdquo;</p>

<p>  to use that</p>

<p>  <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo -i -u postgres</span></code></pre></td></tr></table></div></figure></p>

<p>  <img src="/images/series2/30.png" width="800" height="400"></p>

<h4>Create a New Role</h4>

<p>  We entered to the console, now, create a new Role.</p>

<p>  <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>createuser &ndash;interactive</span></code></pre></td></tr></table></div></figure></p>

<p>  <img src="/images/series2/15.png" width="800" height="400"></p>

<p>now, the user is created, now to check that type</p>

<p>  <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>psql</span></code></pre></td></tr></table></div></figure></p>

<p>when the console comes, then type</p>

<p>  <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>\du</span></code></pre></td></tr></table></div></figure></p>

<p>  <img src="/images/series2/16.png" width="800" height="400"></p>

<h4>To set Password for User</h4>

<p>go to the psql by command</p>

<p>  <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo -u postgres psql</span></code></pre></td></tr></table></div></figure></p>

<p>  <img src="/images/series2/17.png" width="800" height="400"></p>

<p>  type</p>

<p>  <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/password user_name</span></code></pre></td></tr></table></div></figure></p>

<p>  <img src="/images/series2/18.png" width="800" height="400"></p>

<p>this is the end of series, will post more in another series</p>

<p>all set. thanks guys, comment if any error or doubt happend.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Rails App Deployment Using GCP:Series 1]]></title>
    <link href="http://anoobbava.github.io/blog/2018/04/11/rails-app-deployment-using-gcp/"/>
    <updated>2018-04-11T00:32:23+05:30</updated>
    <id>http://anoobbava.github.io/blog/2018/04/11/rails-app-deployment-using-gcp</id>
    <content type="html"><![CDATA[<h2>Deployment using GCP</h2>

<p><img src="/images/gcp-1/0.png" width="800" height="300"></p>

<p>This will be a series of tutorials in which step by step deployment of a ROR project in Google Cloud or GCP. From here onwards it is mentioned as GCP.</p>

<h2>Why GCP</h2>

<p>I am a huge Fan of Open Source Technologies, I have used the Heroku Free Tier, RedHat,Engine Yard Also. I have been tried to use the AWS for a long time. The issue with AWS is that it has free tier but needed credit card to sign-up.Also In the case of heroku, is a PAAS Application and all the process are automated and customisation is less.</p>

<h4>Pros of GCP</h4>

<ol>
<li>comes from Google , oh! Yaaah</li>
<li>No need of credit Card</li>
<li>Need only debit card with VISA or MASTER CARD.</li>
<li>gives us the $300 credit once signup.</li>
<li>$300 credit for 12 months</li>
</ol>


<p><code>Google Cloud Platform, offered by Google, is a suite of cloud computing services that runs on the same infrastructure that Google uses internally for its end-user products, such as Google Search and YouTube.</code></p>

<p>We have explained here is the basic use case to deploy the app, for more details, please refer the official guide.</p>

<h3>signup</h3>

<ol>
<li>go to <a href="http://www.cloud.google.com/">got to GCP</a></li>
<li>signup with your email</li>
<li>add the payment details; dont worry, only debit Card needed, they is no harm because of this, they dont take amount from account unless you have to upgrade the account.</li>
</ol>


<p>Note:
  I have used ICICI Debit Account, and they deducted 50Rs from my account to verify and returned the amount. So No Worries, only i got is a 2 rs for MY OTP.</p>

<p><img src="/images/gcp-1/0_1.png" width="300" height="600"></p>

<h3>Create a Project</h3>

<p>Now, create a Project.</p>

<p><img src="/images/gcp-1/1.png" width="800" height="300"></p>

<p>give a name for the project</p>

<p><img src="/images/gcp-&frac12;.png" width="800" height="400"></p>

<h3>Create an instance</h3>

<p>Now the process is create the instance. Instance is something like a virtual machine. This can be fetched from the Compute Engine. Example instances are production, staging etc.</p>

<p><img src="/images/gcp-1/3.png" width="800" height="400"></p>

<p>Now, add some details to complete the instance creation.</p>

<p><img src="/images/gcp-&frac14;.png" width="800" height="400"></p>

<p>I have used is the ubuntu 16.04, you can choose your BootDisk.</p>

<p>Now, important part, need to link the SSH Key to the GCP.</p>

<p><img src="/images/gcp-1/5.png" width="800" height="400"></p>

<p>click on the create instance</p>

<h3>Link SSH to GCP</h3>

<p>go to the metadata and click on the SSH keys and ADD,then paste the public key to there.</p>

<p><img src="/images/gcp-1/13.png" width="800" height="400"></p>

<p>In order to do that, need to copy the public key</p>

<ol>
<li>Show the available SSH keys</li>
</ol>


<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ls -al ~/.ssh</span></code></pre></td></tr></table></div></figure></p>

<p><img src="/images/gcp-1/6.png" width="800" height="400"></p>

<ol>
<li>copy the desired public key</li>
</ol>


<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>head ~/.ssh/id_rsa.pub</span></code></pre></td></tr></table></div></figure></p>

<p><img src="/images/gcp-1/7.png" width="800" height="400"></p>

<ol>
<li>Add the public Key to the GCP</li>
</ol>


<p><img src="/images/gcp-1/8.png" width="800" height="400"></p>

<h3>Create a Pem File</h3>

<p>because of security concerns and multiple connectivity of instances, We need to generate the pem file from the public key, this is achieved by using.</p>

<p>open a new terminal and run the below code.</p>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ssh-keygen -f ~/.ssh/id_rsa.pub -m &lsquo;PEM&rsquo; -e > public.pem</span></code></pre></td></tr></table></div></figure></p>

<p><img src="/images/gcp-1/9.png" width="100" height="50"></p>

<p>Now the code will generate the pem file in the place of terminal points to , in my case it is home path</p>

<p>Now change the permission of the pem file, by below comand</p>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>chmod 600 public.pem</span></code></pre></td></tr></table></div></figure></p>

<h3>connect the GCP using SSH</h3>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ssh -i public.pem user_name@external_ip</span></code></pre></td></tr></table></div></figure></p>

<p><img src="/images/gcp-1/14.png" width="800" height="300"></p>

<p>user_name is the name which is shown when we copy the ssh key, here irfana_anoob is the user_name</p>

<p>external-ip is the IP which is given when we create the instance</p>

<p><img src="/images/gcp-1/15.png" width="800" height="300"></p>

<p>this is the Series1, will be posting more posts on this Also.</p>

<p>all set. thanks guys, comment if any error or doubt happend.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Upload Images Using Cloudinary in Heroku]]></title>
    <link href="http://anoobbava.github.io/blog/2018/03/28/upload-images-using-cloudinary-in-heroku/"/>
    <updated>2018-03-28T11:43:11+05:30</updated>
    <id>http://anoobbava.github.io/blog/2018/03/28/upload-images-using-cloudinary-in-heroku</id>
    <content type="html"><![CDATA[<h2>Intro</h2>

<p>  <img src="/images/cloudinary/1.png" width="600" height="200"></p>

<p>  As discussed in the previous blogs, heroku is an awesome tool to deploy our application within minutes and no hassles. The issue is with the heroku is, for each specific applications ,need to use the add-ons. some are free and others are paid version. But to use add-on like cloudinary need to provide the credit card info, Here we are explaining how to bypass this issue</p>

<h2>Cloudinary</h2>

<p>  <img src="/images/cloudinary/2.png" width="700" height="300"></p>

<p>Cloudinary, as the name indicates it is a cloud space to save the images and videos. Can be used for both the web and mobile platform. Also the cloudinary provides a cool space as free tier(10GB something and 300000 photos). when We tweet about them, they provides an additional 1GB Also, Awesome right and thanks to cloudinary too.</p>

<h2>Implementation</h2>

<ol>
<li><p>signup with <a href="https://cloudinary.com/">Cloudinary</a></p></li>
<li><p>generate the custom cloudinary.yml via cloudinary console</p></li>
<li><p>copy to the project path</p></li>
<li><p>update the upoader File</p></li>
<li><p>Update in Herkou with ENV Variable.</p></li>
<li><p>deploy the code to heroku</p></li>
</ol>


<h3>Signup with Cloudinary</h3>

<p>Create an account with <a href="https://cloudinary.com/">Cloudinary</a> using email and password.</p>

<p><img src="/images/cloudinary/3.png" width="900" height="300"></p>

<h3>Cloudinary.yml</h3>

<p>If you have not seen the cloudinary.yml, dont worry, will paste my cloudinary.yml file below, Please chnage the details from the dashboard.</p>

<p>below is the dashboard, copy this details and replace these details to the yml file.</p>

<p><img src="/images/cloudinary/4.png" width="900" height="300"></p>

<p>  <script src="https://gist.github.com/anoobbava/c7fd8141c0ace8ddfac514dc145a2c3e.js"></script></p>

<h3>copy to the project path</h3>

<p>include this file in <strong>application_root/config/</strong></p>

<h4>update the upoader File</h4>

<p> in the Uploader.rb file(ImageUploader.rb or AvatarUploader.rb) change the following,</p>

<p>comment below codes</p>

<pre><code># storage :file

# def store_dir
  #   "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  # end
</code></pre>

<h3>Update in Herkou with ENV Variable</h3>

<p>Login in <strong>herkou</strong> dashboard and take our application and add environment variable.</p>

<p><img src="/images/cloudinary/5.png" width="800" height="300"></p>

<pre><code>  CLOUDINARY_URL
</code></pre>

<h3>deploy the code to heroku</h3>

<p>no worries, no need to change the code in the image_tag and upload tags, for me it is all working fine</p>

<p>you check in my site for the output <strong>blog-app-bava.herokuapp.com</strong></p>

<p>code will be available in <a href="https://github.com/anoobbava/blog_app">github</a></p>

<p>all set. thanks guys, comment if any error or doubt happend</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Implement Likes Rails With AJAX Using Acts as Votable Gem]]></title>
    <link href="http://anoobbava.github.io/blog/2018/03/15/implement-likes-rails-with-ajax-using-acts-as-votable-gem/"/>
    <updated>2018-03-15T12:24:19+05:30</updated>
    <id>http://anoobbava.github.io/blog/2018/03/15/implement-likes-rails-with-ajax-using-acts-as-votable-gem</id>
    <content type="html"><![CDATA[<h3>Why this Gem</h3>

<p>  Thanks to Ryan T, without his idea, it will be diffcult. Acts as votable is a gem deals with voting mechanisms, like and unlike things etc, pretyy cool isn&rsquo;t it right.This blog is only a simple idea to use this gem, for more advanced ones you can go to the</p>

<p>  <a href="https://github.com/ryanto/acts_as_votable">github link</a></p>

<h3>Add Gem to Rails Project</h3>

<p>  to fetch the latest version, <a href="https://rubygems.org/gems/acts_as_votable">rubygems acts as votable</a>
  copy the gem and add to our project Gemfile</p>

<p>  <img src="/images/acts_as_votable/1.png" width="400" height="200"></p>

<p>  then run</p>

<pre><code class="``">    bundle install
</code></pre>

<h3>create a migration for the  acts_as_votable</h3>

<p>  In order to save the votes and its depanancies, needed a table, Thanks to Gem, they will create automatically when we run the migration, Run the command in the Terminal.</p>

<pre><code class="``">  rails generate acts_as_votable:migration
</code></pre>

<pre><code class="``">    bundle exe rails db:migrate
</code></pre>

<h3>Use case in Project</h3>

<p>  The Project here I have here is the blog project which contains the Article model and User model. The User able to like an article. By Using AJAX , there is no need to refresh the page. so in the Article model add</p>

<pre><code class="``">    acts_as_votable
</code></pre>

<p>  <img src="/images/acts_as_votable/2.png" width="600" height="200"></p>

<p>  Also add the voter to User model Also,</p>

<pre><code class="``">    acts_as_voter
</code></pre>

<p>  <img src="/images/acts_as_votable/3.png" width="600" height="100"></p>

<h3>ADD the Corresponding Action in the controller</h3>

<p>  In order to work, we need to create an action in the controller, here in my case, there is ArticlesController, what we are doing is create a new action called like</p>

<p>  <img src="/images/acts_as_votable/4.png" width="600" height="100"></p>

<h2>  Will explain the codes here below</h2>

<p>  since we are only implementing here, we need to add the table which user likes the article, for that , the built-in from gem is the &ldquo;upvote_from&rdquo;.
  current_user is the devise_helper to fetch the logined user.
  @article is an instance of the article page.</p>

<h3>ADD the Routes</h3>

<p>  Since the like is the custom action, what we need is the new routes in the article and it is a PUT Action.Also each like belongs to a single article, so we are implementing is the member action under the articles</p>

<p>  <img src="/images/acts_as_votable/5.png" width="500" height="100"></p>

<h3>Create a template corresponding to Like action</h3>

<p>  We are using AJAX to update the count of likes, this will need a like.js.haml needed inside app/views/articles/</p>

<p>  contents are</p>

<p>  <img src="/images/acts_as_votable/6.png" width="600" height="100"></p>

<p>  Right now, the code does not make any sense. since I am following HAML logic, a little bit different than ERB ones.
  the #like-count is the div id, what we have used here is , after liking, we updated the count of likes to #like-count div.
  get_upvotes.size is the helper to fetch the count of likes for the corresponding article.</p>

<h3>Like button in the UI</h3>

<p>  will check the routes is everything all okay,</p>

<p>  <img src="/images/acts_as_votable/7.png" width="700" height="100"></p>

<p>  Ahh!, All set, now add the route path in the page where like button needed, I have added a like.png image in assets to look like social media button. also a CSS class to reduce the image size, if you needed add that or just discard that.</p>

<p>  <img src="/images/acts_as_votable/8.png" width="700" height="100"></p>

<h3>ADD the Div id to update the count of like</h3>

<p>  We have mentioned and id = #like-count in the lik.js.haml, need to add that in any place we can show the count of like. In my example, i have a glyphicon to show that before that i added it like below.</p>

<p>  <img src="/images/acts_as_votable/9.png" width="700" height="100"></p>

<h2>  Will Explain the codes below</h2>

<p>  when the page intially loaded acts_votable gem called &ldquo;get_upvotes&rdquo; will fetch all the likes and show in the page, after that, if any likee from user, then the system Will AJAX and there by calling the like.js.haml and update the new count via AJAX.</p>

<p>  All completed, now the output, will show you, like button</p>

<p>  <img src="/images/acts_as_votable/10.png" width="200" height="100"></p>

<p>  like count image</p>

<p>  <img src="/images/acts_as_votable/11.png" width="300" height="100"></p>

<p>   Note: the count shows as 2 because, I liked 2 times from 2 different accounts, actually there will like only one like per account per article, the gem is intellegent as it is ,again Thanks to Ryan T for this,
   If you have show stoppers, please check the code in</p>

<p>  <a href="https://github.com/anoobbava/wiki_clone_app">github</a></p>

<p>  thanks Guys.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Implement Rspec in ROR Project]]></title>
    <link href="http://anoobbava.github.io/blog/2018/02/27/implement-rspec-in-ror-project/"/>
    <updated>2018-02-27T16:44:30+05:30</updated>
    <id>http://anoobbava.github.io/blog/2018/02/27/implement-rspec-in-ror-project</id>
    <content type="html"><![CDATA[<h2>Rspec, A Brief</h2>

<p> Below is the some syntaxes and errors i have encountered when using rspec, I have shared here for every ones' use.</p>

<h3>install rspec</h3>

<p>  install the rspec gem using the below command</p>

<pre><code class="``">  gem install rspec
</code></pre>

<h3>create a test Group</h3>

<pre><code class="``">  group :test do
    gem 'codeclimate-test-reporter', '~&gt; 1.0.0'
    gem 'database_cleaner', '~&gt; 1.5'
    gem 'factory_bot', '~&gt; 4.8', '&gt;= 4.8.2'
    gem 'factory_bot_rails'
    gem 'faker', '~&gt; 1.6.1'
    gem 'rails-controller-testing', '~&gt; 0.0.3'
    gem 'rspec', '~&gt; 3.6'
    gem 'shoulda-matchers'
    gem 'simplecov'
  end
</code></pre>

<p>  the gem factory_girl is deprecated right now, so we are using the factory_bot instead.</p>

<h3>Add rspec-rails to the Development Group</h3>

<pre><code class="``">  gem 'rspec-rails'
</code></pre>

<p>  Now we need to add the development, test group</p>

<h3>Intialise the folders for Rspec</h3>

<p>  achieved using the below command</p>

<pre><code class="```">   rspec --init
</code></pre>

<h3>Require rspec/rails to spec helper</h3>

<pre><code class="``">  require 'rspec/rails'
</code></pre>

<p>   need to add above command to the spec_helper</p>

<h3>You are Go</h3>

<p>  All set, now delete the test/ folder in the project and create the specs in models and ccontrollers</p>

<p>  to generate rspec file for existing controller</p>

<pre><code class="``">  rails generate rspec:controller Controller_name
</code></pre>

<p>  to generate rspec file for exising model</p>

<pre><code class="``">  rails generate rspec:model model_name
</code></pre>

<h3>setup test database</h3>

<p>  Do the below step only if you don&rsquo;t have the test database created</p>

<pre><code class="``">  rake db:test:prepare
</code></pre>

<h3>Why we need the database cleaner</h3>

<p>  Is a useful tool to clear the dB from the test database. for that need to use the database_cleaner gem in test group.</p>

<ol>
<li><p>add the gem</p>

<pre><code>gem 'database_cleaner'
</code></pre></li>
<li><p>require in spec_helper</p>

<pre><code>require 'database_cleaner'
</code></pre></li>
<li><p>add the tables where clearing is needed</p>

<pre><code>DatabaseCleaner.strategy = :truncation, { :only =&gt; %w[users] }
</code></pre>

<p>here users is one table, multiple tables can be added using comma</p></li>
<li>Call the action</li>
</ol>


<p>  add the below line where we need to clean the dB</p>

<pre><code class="``">  DatabaseCleaner.clean
</code></pre>

<p>  Note: in psql manually create test database  and do rake db:migrate RAILS_ENV=test</p>

<h3>Important Points to  remember</h3>

<ol>
<li>To clear all the data</li>
</ol>


<p>  add the below line to the spec_helper</p>

<pre><code class="``">  config.after :all do
   ActiveRecord::Base.subclasses.each(&amp;:delete_all)
  end
</code></pre>

<p>  2.To view the console of test dB</p>

<pre><code class="``">  rails c test
</code></pre>

<ol>
<li><p>If below Error comes up</p>

<p>undefined method `sign_in' for #&lt;RSpec::Core:</p>

<h2>Solution</h2>

<p>add below line to spec_helper</p>

<pre><code>config.include Devise::TestHelpers, type: :controller
</code></pre></li>
<li><p>If below error pops Up</p>

<p> rmed176lt@RMED176LT:~/ror/12-week/wiki_clone$ bundle exec rails generate rspec:install
 Running via Spring preloader in process 10346
 Could not find generator &lsquo;rspec:install&rsquo;. Maybe you meant &lsquo;devise:install&rsquo;, &lsquo;responders:install&rsquo; or &lsquo;simple_form:install&rsquo;
 Run <code>rails generate --help</code> for more options.</p>

<h2> Solution</h2>

<p> <a href="https://stackoverflow.com/questions/39542169/rails-5-could-not-find-generator-rspecinstall/39542170">visit link for SO answer</a></p></li>
<li><p>If below error pops up</p></li>
</ol>


<p>  1) ArticlesController redirect to user signin
       Failure/Error: get :index</p>

<pre><code>   NoMethodError:
     undefined method `get' for #&lt;RSpec::ExampleGroups::ArticlesController:0xb8c4f8c&gt;
     Did you mean?  gets
                    gem
   # ./spec/controllers/articles_controller_spec.rb:6:in `block (2 levels) in &lt;top (required)&gt;'
</code></pre>

<p>  Finished in 0.00479 seconds (files took 4.41 seconds to load)
  1 example, 1 failure</p>

<p>  Failed examples:</p>

<p>  rspec ./spec/controllers/articles_controller_spec.rb:5 # ArticlesController redirect to user signin</p>

<h2>  Solution</h2>

<ol>
<li>need to add require &lsquo;rspec/rails&rsquo; in spec_helper</li>
<li>if wont work then add below line
<code>
config.infer_spec_type_from_file_location!
</code>
for me, 2 nd one is not required.</li>
</ol>


<h3>below is sample spec_helper.rb</h3>

<script src="https://gist.github.com/anoobbava/27255d8052d7b8d5ac095f511e6e242b.js"></script>

]]></content>
  </entry>
  
</feed>

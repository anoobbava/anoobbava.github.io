
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Awesome Web Blog</title>
  <meta name="author" content="Anoob Bava">

  
  <meta name="description" content="Deployment using GCP This will be a series of tutorials in which step by step deployment of a ROR project in Google Cloud or GCP. From here onwards &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://anoobbava.github.io/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Awesome Web Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-101186678-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Awesome Web Blog</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="anoobbava.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/04/11/rails-app-deployment-using-gcp/">Rails App Deployment Using GCP:Series 1</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-04-11T00:32:23+05:30'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>11</span><span class='date-suffix'>th</span>, <span class='date-year'>2018</span></span> <span class='time'>12:32 am</span></time>
        
           | <a href="/blog/2018/04/11/rails-app-deployment-using-gcp/#disqus_thread"
             data-disqus-identifier="http://anoobbava.github.io/blog/2018/04/11/rails-app-deployment-using-gcp/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Deployment using GCP</h2>

<p><img src="/images/gcp-1/0.png" width="800" height="300"></p>

<p>This will be a series of tutorials in which step by step deployment of a ROR project in Google Cloud or GCP. From here onwards it is mentioned as GCP.</p>

<h2>Why GCP</h2>

<p>I am a huge Fan of Open Source Technologies, I have used the Heroku Free Tier, RedHat,Engine Yard Also. I have been tried to use the AWS for a long time. The issue with AWS is that it has free tier but needed credit card to sign-up.Also In the case of heroku, is a PAAS Application and all the process are automated and customisation is less.</p>

<h4>Pros of GCP</h4>

<ol>
<li>comes from Google , oh! Yaaah</li>
<li>No need of credit Card</li>
<li>Need only debit card with VISA or MASTER CARD.</li>
<li>gives us the $300 credit once signup.</li>
<li>$300 credit for 12 months</li>
</ol>


<p><code>Google Cloud Platform, offered by Google, is a suite of cloud computing services that runs on the same infrastructure that Google uses internally for its end-user products, such as Google Search and YouTube.</code></p>

<p>We have explained here is the basic use case to deploy the app, for more details, please refer the official guide.</p>

<h3>signup</h3>

<ol>
<li>go to <a href="http://www.cloud.google.com/">got to GCP</a></li>
<li>signup with your email</li>
<li>add the payment details; dont worry, only debit Card needed, they is no harm because of this, they dont take amount from account unless you have to upgrade the account.</li>
</ol>


<p>Note:
  I have used ICICI Debit Account, and they deducted 50Rs from my account to verify and returned the amount. So No Worries, only i got is a 2 rs for MY OTP.</p>

<p><img src="/images/gcp-1/0_1.png" width="300" height="600"></p>

<h3>Create a Project</h3>

<p>Now, create a Project.</p>

<p><img src="/images/gcp-1/1.png" width="800" height="300"></p>

<p>give a name for the project</p>

<p><img src="/images/gcp-1/2.png" width="800" height="400"></p>

<h3>Create an instance</h3>

<p>Now the process is create the instance. Instance is something like a virtual machine. This can be fetched from the Compute Engine. Example instances are production, staging etc.</p>

<p><img src="/images/gcp-1/3.png" width="800" height="400"></p>

<p>Now, add some details to complete the instance creation.</p>

<p><img src="/images/gcp-1/4.png" width="800" height="400"></p>

<p>I have used is the ubuntu 16.04, you can choose your BootDisk.</p>

<p>Now, important part, need to link the SSH Key to the GCP.</p>

<p><img src="/images/gcp-1/5.png" width="800" height="400"></p>

<p>click on the create instance</p>

<h3>Link SSH to GCP</h3>

<p>go to the metadata and click on the SSH keys and ADD,then paste the public key to there.</p>

<p><img src="/images/gcp-1/13.png" width="800" height="400"></p>

<p>In order to do that, need to copy the public key</p>

<ol>
<li>Show the available SSH keys</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ls -al ~/.ssh</span></code></pre></td></tr></table></div></figure>


<p><img src="/images/gcp-1/6.png" width="800" height="400"></p>

<ol>
<li>copy the desired public key</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>head ~/.ssh/id_rsa.pub</span></code></pre></td></tr></table></div></figure>


<p><img src="/images/gcp-1/7.png" width="800" height="400"></p>

<ol>
<li>Add the public Key to the GCP</li>
</ol>


<p><img src="/images/gcp-1/8.png" width="800" height="400"></p>

<h3>Create a Pem File</h3>

<p>because of security concerns and multiple connectivity of instances, We need to generate the pem file from the public key, this is achieved by using.</p>

<p>open a new terminal and run the below code.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ssh-keygen -f ~/.ssh/id_rsa.pub -m 'PEM' -e > public.pem</span></code></pre></td></tr></table></div></figure>


<p><img src="/images/gcp-1/9.png" width="100" height="50"></p>

<p>Now the code will generate the pem file in the place of terminal points to , in my case it is home path</p>

<p>Now change the permission of the pem file, by below comand</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>chmod 600 public.pem</span></code></pre></td></tr></table></div></figure>


<h3>connect the GCP using SSH</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ssh -i public.pem user_name@external_ip</span></code></pre></td></tr></table></div></figure>


<p><img src="/images/gcp-1/14.png" width="800" height="300"></p>

<p>user_name is the name which is shown when we copy the ssh key, here irfana_anoob is the user_name</p>

<p>external-ip is the IP which is given when we create the instance</p>

<p><img src="/images/gcp-1/15.png" width="800" height="300"></p>

<p>this is the Series1, will be posting more posts on this Also.</p>

<p>all set. thanks guys, comment if any error or doubt happend.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/03/28/upload-images-using-cloudinary-in-heroku/">Upload Images Using Cloudinary in Heroku</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-03-28T11:43:11+05:30'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2018</span></span> <span class='time'>11:43 am</span></time>
        
           | <a href="/blog/2018/03/28/upload-images-using-cloudinary-in-heroku/#disqus_thread"
             data-disqus-identifier="http://anoobbava.github.io/blog/2018/03/28/upload-images-using-cloudinary-in-heroku/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Intro</h2>

<p>  <img src="/images/cloudinary/1.png" width="600" height="200"></p>

<p>  As discussed in the previous blogs, heroku is an awesome tool to deploy our application within minutes and no hassles. The issue is with the heroku is, for each specific applications ,need to use the add-ons. some are free and others are paid version. But to use add-on like cloudinary need to provide the credit card info, Here we are explaining how to bypass this issue</p>

<h2>Cloudinary</h2>

<p>  <img src="/images/cloudinary/2.png" width="700" height="300"></p>

<p>Cloudinary, as the name indicates it is a cloud space to save the images and videos. Can be used for both the web and mobile platform. Also the cloudinary provides a cool space as free tier(10GB something and 300000 photos). when We tweet about them, they provides an additional 1GB Also, Awesome right and thanks to cloudinary too.</p>

<h2>Implementation</h2>

<ol>
<li><p>signup with <a href="https://cloudinary.com/">Cloudinary</a></p></li>
<li><p>generate the custom cloudinary.yml via cloudinary console</p></li>
<li><p>copy to the project path</p></li>
<li><p>update the upoader File</p></li>
<li><p>Update in Herkou with ENV Variable.</p></li>
<li><p>deploy the code to heroku</p></li>
</ol>


<h3>Signup with Cloudinary</h3>

<p>Create an account with <a href="https://cloudinary.com/">Cloudinary</a> using email and password.</p>

<p><img src="/images/cloudinary/3.png" width="900" height="300"></p>

<h3>Cloudinary.yml</h3>

<p>If you have not seen the cloudinary.yml, dont worry, will paste my cloudinary.yml file below, Please chnage the details from the dashboard.</p>

<p>below is the dashboard, copy this details and replace these details to the yml file.</p>

<p><img src="/images/cloudinary/4.png" width="900" height="300"></p>

<p>  <script src="https://gist.github.com/anoobbava/c7fd8141c0ace8ddfac514dc145a2c3e.js"></script></p>

<h3>copy to the project path</h3>

<p>include this file in <strong>application_root/config/</strong></p>

<h4>update the upoader File</h4>

<p> in the Uploader.rb file(ImageUploader.rb or AvatarUploader.rb) change the following,</p>

<p>comment below codes</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># storage :file
</span><span class='line'>
</span><span class='line'># def store_dir
</span><span class='line'>  #   "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
</span><span class='line'>  # end</span></code></pre></td></tr></table></div></figure>


<h3>Update in Herkou with ENV Variable</h3>

<p>Login in <strong>herkou</strong> dashboard and take our application and add environment variable.</p>

<p><img src="/images/cloudinary/5.png" width="800" height="300"></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  CLOUDINARY_URL</span></code></pre></td></tr></table></div></figure>


<h3>deploy the code to heroku</h3>

<p>no worries, no need to change the code in the image_tag and upload tags, for me it is all working fine</p>

<p>you check in my site for the output <strong>blog-app-bava.herokuapp.com</strong></p>

<p>code will be available in <a href="https://github.com/anoobbava/blog_app">github</a></p>

<p>all set. thanks guys, comment if any error or doubt happend</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/03/27/automatically-run-the-migrations-in-heroku/">Automatically Run the Migrations in Heroku</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-03-27T20:26:59+05:30'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>27</span><span class='date-suffix'>th</span>, <span class='date-year'>2018</span></span> <span class='time'>8:26 pm</span></time>
        
           | <a href="/blog/2018/03/27/automatically-run-the-migrations-in-heroku/#disqus_thread"
             data-disqus-identifier="http://anoobbava.github.io/blog/2018/03/27/automatically-run-the-migrations-in-heroku/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>We all know that Heroku Running on the PAAS(Platform As Service) architecture. It is free for starter applications or hobby projects. For a normal projects, deplolyment phase consists of below steps</p>

<ol>
<li>select service</li>
<li>install OS</li>
<li>install Ruby</li>
<li>install Rails</li>
<li>Install dB</li>
<li>Install AppServer</li>
<li>configure All</li>
</ol>


<p>trust me, it is not a simple task, I have tried it and it is always in pain when setup. Takes deep knowledge to master in deployment. But for heroku is so cool and no worries, But here we have not discussing that,we are facing and issue with migration and this migration need to run every time after the code is deployed.</p>

<p>We need to run the below code every time after &ldquo;git push heroku master&rdquo;</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  reroku rake db:migrate</span></code></pre></td></tr></table></div></figure>


<p><img src="/images/run-migration/1.png" width="800" height="300"></p>

<h2>Solution</h2>

<p>thanks to Heroku, they created something called <strong>release</strong>, which will be like a after_update callback to call this process. for that need to add some code to the Procfile</p>

<h3>what is a Procfile</h3>

<p>  As copied from heroku doc
  ```</p>

<blockquote><p>A Procfile is a mechanism for declaring what commands are run by your applicationâ€™s dynos on the Heroku platform. It follows the process model. You can use a Procfile to declare various process types, such as your web server, multiple types of workers, a singleton process like a clock, or the tasks you would like to run before a new release is deployed to production.
Every dyno in your application will belong to one of the process types, and will begin executing by running the command associated with that process type.</p></blockquote>

<p> create a file called <strong>Procfile</strong> in the Application root path, ensure no extensions and nothing more in the file</p>

<p> Add the below code in to that file,</p>

<pre><code class="`">    release: rake db:migrate
</code></pre>

<p>hooray. all done, now do work, system will automatically check the migration files and executes them.</p>

<p><img src="/images/run-migration/2.png" width="1000" height="300"></p>

<h3>Note</h3>

<p>this process explained on the assumption that, you know the deployment of heroku and enable automatic deployment using github also.</p>

<h4>Automatic Deployment using Github</h4>

<p>Heroku provides a service to deploy the code to production once we commited in a specific branch. For me, <strong>release</strong> is the deployment branch. Need to a simple step to do that</p>

<ol>
<li>choose the <strong>Deployment method</strong> and connect to <strong>Github</strong></li>
</ol>


<p><img src="/images/run-migration/3.png" width="800" height="300"></p>

<ol>
<li>in the <strong>Automatic deploys</strong> section select your branch,</li>
</ol>


<p><img src="/images/run-migration/4.png" width="800" height="300"></p>

<p>I have configured the test suit by Travis CI, thats why checked the option <strong>Wait for CI to pass before deploy</strong></p>

<p>all set. thanks guys, comment if any error or doubt happend</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/03/22/create-custom-error-pages-in-rails/">Create Custom Error Pages in Rails</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-03-22T19:54:55+05:30'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>22</span><span class='date-suffix'>nd</span>, <span class='date-year'>2018</span></span> <span class='time'>7:54 pm</span></time>
        
           | <a href="/blog/2018/03/22/create-custom-error-pages-in-rails/#disqus_thread"
             data-disqus-identifier="http://anoobbava.github.io/blog/2018/03/22/create-custom-error-pages-in-rails/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/images/custom_error/rails_error_page.png" width="600" height="100"></p>

<p>We All know what this error page means, it is the 500 error when the internal Server issue. The problem of this issue on the server level like server Time out out or Internal issue or anything.It is not user friendly, it is the custom error page from the rails itself.</p>

<h3>Where is the Error Page ??</h3>

<p>  For every Rails Project, the Page is inside  public/ folders, the files are</p>

<ol>
<li>404.html</li>
<li>422.html</li>
<li>500.html</li>
</ol>


<p>  this is the source of this error UI.
  We can follow 2 approaches</p>

<ol>
<li>simple one</li>
<li>coding approach</li>
</ol>


<h3>Simple one</h3>

<p>  update the files with custom html and files, so the file loaded will be based on the new custom template.
  To test this, suppose your server is running on &ldquo;localhost:3000&rdquo; server, we can just type</p>

<pre><code class="`">    localhost:3000/500 or localhost:3000/404 or localhost:3000/422
</code></pre>

<p>  if it s not working, go to the &ldquo;config/environments/development.rb&rdquo; and make the line to &ldquo;false&rdquo;</p>

<pre><code class="``">      config.consider_all_requests_local = false
</code></pre>

<h3>Coding Approach</h3>

<p>  We can divide this approach to 5 parts</p>

<ol>
<li>update in the Application.rb</li>
<li>Remove the public static files</li>
<li>Add the routes</li>
<li>Create a new controller</li>
<li>create the views</li>
</ol>


<h4>Update in the application.rb File</h4>

<pre><code class="``">    config.exceptions_app = self.routes
</code></pre>

<h4>Remove the static files</h4>

<p>  All the depandant files like 404.html, 422.html, 500.html. Delete all these files</p>

<h4>Add the routes</h4>

<pre><code class="``">    get '/404', to: "errors#not_found"
    get '/422', to: "errors#unacceptable"
    get '/500', to: "errors#internal_error"
</code></pre>

<p>  this deontes the controllers and its action.</p>

<h4>Create the controller</h4>

<p>  We need to create a new controller to make this logic works that is using a contoller &ldquo;ErrorsController&rdquo;</p>

<p>  Add the action corresponding to that also,</p>

<p>  <script src="https://gist.github.com/anoobbava/9ed5b57e3d8bb75c77715a7057cd86b7.js"></script></p>

<pre><code class="``">    skip_before_action :authenticate_user!
</code></pre>

<p>  that code is to bypass devise, or else need to login to view the errors.</p>

<h4>Create the views</h4>

<p>  create the views for the errors, so create folder named errors in app/views/</p>

<pre><code class="``">    not_found.haml
    unacceptable.haml
    internal_error.haml
</code></pre>

<p>  All done, you can write custom html into that, will give you a sample to work with.</p>

<p>  <script src="https://gist.github.com/anoobbava/f028100c28d95fd664bbf59195f26b8b.js"></script></p>

<p>  it is copied from some page, I am not sure about the site, will mention thanks.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/03/16/allow-mutiple-images-via-carrierwave/">Allow Mutiple Images via Carrierwave</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-03-16T12:59:43+05:30'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>16</span><span class='date-suffix'>th</span>, <span class='date-year'>2018</span></span> <span class='time'>12:59 pm</span></time>
        
           | <a href="/blog/2018/03/16/allow-mutiple-images-via-carrierwave/#disqus_thread"
             data-disqus-identifier="http://anoobbava.github.io/blog/2018/03/16/allow-mutiple-images-via-carrierwave/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Gem intro</h3>

<p>  In this tutoial, we are using the carrierwave gem.The aim of this tutorial is to upload multiple images for web Applications</p>

<pre><code class="``">    gem 'carrierwave', '~&gt; 1.2', '&gt;= 1.2.2'
</code></pre>

<p>  We are using this version, Add this gem to your Gemfile and do the</p>

<pre><code class="``">    bundle install
</code></pre>

<h3>Generate the Uploader File</h3>

<p>  In order carrierwave to work, need an uploader Class. Which will be generated using the command</p>

<pre><code class="``">    rails generate uploader image
</code></pre>

<p>  Instead of image  u can give avatar or anything.As s result of the above command  a file generated called ImageUploader.rb in app/uploaders/</p>

<h3>Usecase of Carrierwave</h3>

<p>  I have an Article model, and I need to upload mutliple images of the single Article. To do that, we need to generate the following</p>

<ol>
<li>ArticleAttachment Model: To save the mutliple images for the single article and article_id to denotes the images are under that article</li>
<li>Necessory updations in the model Files</li>
<li>Update the controller to accept multiple images</li>
<li>Need to accept mutiple images from user</li>
<li>show the images to user after the article creation a success!!</li>
</ol>


<h3>Generate the ArticleAttachment Model</h3>

<p>  To generate the model run the below command with 2 columns</p>

<ol>
<li>article_id :integer</li>
<li>image :string</li>
</ol>


<pre><code class="``">    rails g model ArticleAttachment article_id:integer image:string
</code></pre>

<p>  run</p>

<pre><code class="``">    bundle exec rails db:migrate
</code></pre>

<h3>changes in the Models</h3>

<p>  in the Article Model, need to chnage on below,</p>

<pre><code class="``">    has_many :article_attachments
    accepts_nested_attributes_for :article_attachments
</code></pre>

<p>  <img src="/images/carrierwave/1.png" width="600" height="100"></p>

<p>  in the PostAttachment model</p>

<pre><code class="``">    mount_uploader :image, ImageUploader
    belongs_to :article
</code></pre>

<p>  <img src="/images/carrierwave/2.png" width="600" height="100"></p>

<h3>Changes to controllers</h3>

<p>  Need to change the controllers in below places</p>

<ol>
<li>new Action</li>
<li>show action</li>
<li>create action</li>
<li>parameters passing</li>
</ol>


<h4>New Action</h4>

<p>  Need to build an instance variable to accept the article_attachments</p>

<pre><code class="``">    @article_attachment = @article.article_attachments.build
</code></pre>

<p>  <img src="/images/carrierwave/3.png" width="600" height="100"></p>

<h4>Show action</h4>

<p>  To fetch all the images belongs to an article</p>

<pre><code class="``">    @article_attachments = @article.article_attachments.all
</code></pre>

<p>  &ldquo;@article&rdquo; will be set using fetch_article method</p>

<pre><code class="``">    def fetch_article
      @article = Article.find_by(id: params[:id])
    end
</code></pre>

<h4>Create Action</h4>

<p>  Need to save the data fetched from user</p>

<pre><code class="``">    if @article.save
      params[:article_attachments]['image'].each do |a|
        @article.article_attachments.create!(image: a, article_id: @article.id)
      end
      flash[:notice] = 'Article Created'
      redirect_to @article
    else
      render 'new'
    end
</code></pre>

<h4>Params Passing</h4>

<pre><code class="``">    def article_params
      params.require(:article).permit(:title, :content, :category_id,
                                    article_attachments_attributes: [:id, :article_id, :image])
    end
</code></pre>

<p>  Need to add the parameters to allow in to the system.</p>

<h3>Accept image from user</h3>

<p>  We have updated the controller code, now in the View, in order to accept image from the user perspective need to update the form with below</p>

<pre><code class="``">    = f.fields_for :article_attachments do |p|
        = p.label :image
        = p.file_field :image, :multiple =&gt; true, name: "article_attachments[image][]"
</code></pre>

<p>  Full pciture of the form will be like below,</p>

<p>  <img src="/images/carrierwave/4.png" width="700" height="100"></p>

<p>  Now what will happens is that in the create action, will get params with article_attachments and inside that &ldquo;image&rdquo; hash will have the images selected from user to be ready to be saved to the dB.</p>

<h3>Show the output</h3>

<p>  Now we need to show the images after successful creation of an article. To do  that, we have updated all the images belongs to the particular to this &ldquo;@article_attachments&rdquo; varaiable. What we need is just iterate and print the values.</p>

<pre><code class="``">    - @article_attachments.each do |image|
            .post-image
              = image_tag(image.image_url.to_s)
</code></pre>

<p>thats all done, Now check it is working ,please post if any doubts or bugs encountered.</p>

<p>checkout my <a href="wwww.github.com/anoobbava/blog_app">code</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/03/15/implement-likes-rails-with-ajax-using-acts-as-votable-gem/">Implement Likes Rails With AJAX Using Acts as Votable Gem</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-03-15T12:24:19+05:30'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2018</span></span> <span class='time'>12:24 pm</span></time>
        
           | <a href="/blog/2018/03/15/implement-likes-rails-with-ajax-using-acts-as-votable-gem/#disqus_thread"
             data-disqus-identifier="http://anoobbava.github.io/blog/2018/03/15/implement-likes-rails-with-ajax-using-acts-as-votable-gem/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Why this Gem</h3>

<p>  Thanks to Ryan T, without his idea, it will be diffcult. Acts as votable is a gem deals with voting mechanisms, like and unlike things etc, pretyy cool isn&rsquo;t it right.This blog is only a simple idea to use this gem, for more advanced ones you can go to the</p>

<p>  <a href="https://github.com/ryanto/acts_as_votable">github link</a></p>

<h3>Add Gem to Rails Project</h3>

<p>  to fetch the latest version, <a href="https://rubygems.org/gems/acts_as_votable">rubygems acts as votable</a>
  copy the gem and add to our project Gemfile</p>

<p>  <img src="/images/acts_as_votable/1.png" width="400" height="200"></p>

<p>  then run</p>

<pre><code class="``">    bundle install
</code></pre>

<h3>create a migration for the  acts_as_votable</h3>

<p>  In order to save the votes and its depanancies, needed a table, Thanks to Gem, they will create automatically when we run the migration, Run the command in the Terminal.</p>

<pre><code class="``">  rails generate acts_as_votable:migration
</code></pre>

<pre><code class="``">    bundle exe rails db:migrate
</code></pre>

<h3>Use case in Project</h3>

<p>  The Project here I have here is the blog project which contains the Article model and User model. The User able to like an article. By Using AJAX , there is no need to refresh the page. so in the Article model add</p>

<pre><code class="``">    acts_as_votable
</code></pre>

<p>  <img src="/images/acts_as_votable/2.png" width="600" height="200"></p>

<p>  Also add the voter to User model Also,</p>

<pre><code class="``">    acts_as_voter
</code></pre>

<p>  <img src="/images/acts_as_votable/3.png" width="600" height="100"></p>

<h3>ADD the Corresponding Action in the controller</h3>

<p>  In order to work, we need to create an action in the controller, here in my case, there is ArticlesController, what we are doing is create a new action called like</p>

<p>  <img src="/images/acts_as_votable/4.png" width="600" height="100"></p>

<h2>  Will explain the codes here below</h2>

<p>  since we are only implementing here, we need to add the table which user likes the article, for that , the built-in from gem is the &ldquo;upvote_from&rdquo;.
  current_user is the devise_helper to fetch the logined user.
  @article is an instance of the article page.</p>

<h3>ADD the Routes</h3>

<p>  Since the like is the custom action, what we need is the new routes in the article and it is a PUT Action.Also each like belongs to a single article, so we are implementing is the member action under the articles</p>

<p>  <img src="/images/acts_as_votable/5.png" width="500" height="100"></p>

<h3>Create a template corresponding to Like action</h3>

<p>  We are using AJAX to update the count of likes, this will need a like.js.haml needed inside app/views/articles/</p>

<p>  contents are</p>

<p>  <img src="/images/acts_as_votable/6.png" width="600" height="100"></p>

<p>  Right now, the code does not make any sense. since I am following HAML logic, a little bit different than ERB ones.
  the #like-count is the div id, what we have used here is , after liking, we updated the count of likes to #like-count div.
  get_upvotes.size is the helper to fetch the count of likes for the corresponding article.</p>

<h3>Like button in the UI</h3>

<p>  will check the routes is everything all okay,</p>

<p>  <img src="/images/acts_as_votable/7.png" width="700" height="100"></p>

<p>  Ahh!, All set, now add the route path in the page where like button needed, I have added a like.png image in assets to look like social media button. also a CSS class to reduce the image size, if you needed add that or just discard that.</p>

<p>  <img src="/images/acts_as_votable/8.png" width="700" height="100"></p>

<h3>ADD the Div id to update the count of like</h3>

<p>  We have mentioned and id = #like-count in the lik.js.haml, need to add that in any place we can show the count of like. In my example, i have a glyphicon to show that before that i added it like below.</p>

<p>  <img src="/images/acts_as_votable/9.png" width="700" height="100"></p>

<h2>  Will Explain the codes below</h2>

<p>  when the page intially loaded acts_votable gem called &ldquo;get_upvotes&rdquo; will fetch all the likes and show in the page, after that, if any likee from user, then the system Will AJAX and there by calling the like.js.haml and update the new count via AJAX.</p>

<p>  All completed, now the output, will show you, like button</p>

<p>  <img src="/images/acts_as_votable/10.png" width="200" height="100"></p>

<p>  like count image</p>

<p>  <img src="/images/acts_as_votable/11.png" width="300" height="100"></p>

<p>   Note: the count shows as 2 because, I liked 2 times from 2 different accounts, actually there will like only one like per account per article, the gem is intellegent as it is ,again Thanks to Ryan T for this,
   If you have show stoppers, please check the code in</p>

<p>  <a href="https://github.com/anoobbava/wiki_clone_app">github</a></p>

<p>  thanks Guys.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/02/27/implement-rspec-in-ror-project/">Implement Rspec in ROR Project</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-02-27T16:44:30+05:30'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>27</span><span class='date-suffix'>th</span>, <span class='date-year'>2018</span></span> <span class='time'>4:44 pm</span></time>
        
           | <a href="/blog/2018/02/27/implement-rspec-in-ror-project/#disqus_thread"
             data-disqus-identifier="http://anoobbava.github.io/blog/2018/02/27/implement-rspec-in-ror-project/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Rspec, A Brief</h2>

<p> Below is the some syntaxes and errors i have encountered when using rspec, I have shared here for every ones' use.</p>

<h3>install rspec</h3>

<p>  install the rspec gem using the below command</p>

<pre><code class="``">  gem install rspec
</code></pre>

<h3>create a test Group</h3>

<pre><code class="``">  group :test do
    gem 'codeclimate-test-reporter', '~&gt; 1.0.0'
    gem 'database_cleaner', '~&gt; 1.5'
    gem 'factory_bot', '~&gt; 4.8', '&gt;= 4.8.2'
    gem 'factory_bot_rails'
    gem 'faker', '~&gt; 1.6.1'
    gem 'rails-controller-testing', '~&gt; 0.0.3'
    gem 'rspec', '~&gt; 3.6'
    gem 'shoulda-matchers'
    gem 'simplecov'
  end
</code></pre>

<p>  the gem factory_girl is deprecated right now, so we are using the factory_bot instead.</p>

<h3>Add rspec-rails to the Development Group</h3>

<pre><code class="``">  gem 'rspec-rails'
</code></pre>

<p>  Now we need to add the development, test group</p>

<h3>Intialise the folders for Rspec</h3>

<p>  achieved using the below command</p>

<pre><code class="```">   rspec --init
</code></pre>

<h3>Require rspec/rails to spec helper</h3>

<pre><code class="``">  require 'rspec/rails'
</code></pre>

<p>   need to add above command to the spec_helper</p>

<h3>You are Go</h3>

<p>  All set, now delete the test/ folder in the project and create the specs in models and ccontrollers</p>

<p>  to generate rspec file for existing controller</p>

<pre><code class="``">  rails generate rspec:controller Controller_name
</code></pre>

<p>  to generate rspec file for exising model</p>

<pre><code class="``">  rails generate rspec:model model_name
</code></pre>

<h3>setup test database</h3>

<p>  Do the below step only if you don&rsquo;t have the test database created</p>

<pre><code class="``">  rake db:test:prepare
</code></pre>

<h3>Why we need the database cleaner</h3>

<p>  Is a useful tool to clear the dB from the test database. for that need to use the database_cleaner gem in test group.</p>

<ol>
<li><p>add the gem</p>

<pre><code>gem 'database_cleaner'
</code></pre></li>
<li><p>require in spec_helper</p>

<pre><code>require 'database_cleaner'
</code></pre></li>
<li><p>add the tables where clearing is needed</p>

<pre><code>DatabaseCleaner.strategy = :truncation, { :only =&gt; %w[users] }
</code></pre>

<p>here users is one table, multiple tables can be added using comma</p></li>
<li>Call the action</li>
</ol>


<p>  add the below line where we need to clean the dB</p>

<pre><code class="``">  DatabaseCleaner.clean
</code></pre>

<p>  Note: in psql manually create test database  and do rake db:migrate RAILS_ENV=test</p>

<h3>Important Points to  remember</h3>

<ol>
<li>To clear all the data</li>
</ol>


<p>  add the below line to the spec_helper</p>

<pre><code class="``">  config.after :all do
   ActiveRecord::Base.subclasses.each(&amp;:delete_all)
  end
</code></pre>

<p>  2.To view the console of test dB</p>

<pre><code class="``">  rails c test
</code></pre>

<ol>
<li><p>If below Error comes up</p>

<p>undefined method `sign_in' for #&lt;RSpec::Core:</p>

<h2>Solution</h2>

<p>add below line to spec_helper</p>

<pre><code>config.include Devise::TestHelpers, type: :controller
</code></pre></li>
<li><p>If below error pops Up</p>

<p> rmed176lt@RMED176LT:~/ror/12-week/wiki_clone$ bundle exec rails generate rspec:install
 Running via Spring preloader in process 10346
 Could not find generator &lsquo;rspec:install&rsquo;. Maybe you meant &lsquo;devise:install&rsquo;, &lsquo;responders:install&rsquo; or &lsquo;simple_form:install&rsquo;
 Run <code>rails generate --help</code> for more options.</p>

<h2> Solution</h2>

<p> <a href="https://stackoverflow.com/questions/39542169/rails-5-could-not-find-generator-rspecinstall/39542170">visit link for SO answer</a></p></li>
<li><p>If below error pops up</p></li>
</ol>


<p>  1) ArticlesController redirect to user signin
       Failure/Error: get :index</p>

<pre><code>   NoMethodError:
     undefined method `get' for #&lt;RSpec::ExampleGroups::ArticlesController:0xb8c4f8c&gt;
     Did you mean?  gets
                    gem
   # ./spec/controllers/articles_controller_spec.rb:6:in `block (2 levels) in &lt;top (required)&gt;'
</code></pre>

<p>  Finished in 0.00479 seconds (files took 4.41 seconds to load)
  1 example, 1 failure</p>

<p>  Failed examples:</p>

<p>  rspec ./spec/controllers/articles_controller_spec.rb:5 # ArticlesController redirect to user signin</p>

<h2>  Solution</h2>

<ol>
<li>need to add require &lsquo;rspec/rails&rsquo; in spec_helper</li>
<li>if wont work then add below line
<code>
config.infer_spec_type_from_file_location!
</code>
for me, 2 nd one is not required.</li>
</ol>


<h3>below is sample spec_helper.rb</h3>

<script src="https://gist.github.com/anoobbava/27255d8052d7b8d5ac095f511e6e242b.js"></script>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/11/14/create-a-blogging-site-using-octopress-and-github/">Create a Blog With Octopress</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-11-14T19:20:57+05:30'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2017</span></span> <span class='time'>7:20 pm</span></time>
        
           | <a href="/blog/2017/11/14/create-a-blogging-site-using-octopress-and-github/#disqus_thread"
             data-disqus-identifier="http://anoobbava.github.io/blog/2017/11/14/create-a-blogging-site-using-octopress-and-github/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Why Blogging</h3>

<p>Most of us are very much interested to write the blog to share what we think and to express our ideas to the world. But in reality, it won&rsquo;t work. Sometimes Lazy attitude and lack of knowlegde about how to blog. Thanks to Ruby We have Awesome tool called Jekyll to blog.</p>

<h3>What is a Jekyll.</h3>

<p><img src="/images/octopress/jekyll_image.png" width="600" height="300"></p>

<p>Jeykyll is a static, simple blog aware site generator out of ruby. It is the one of the most trending repos of ruby in gthub.There are a lot of customisations in the jekyll; when we look it for the first time, we dont understand it very well.Same experiance for me too, but I don&rsquo;t give up. I learned more about that and I came up with Octopress.</p>

<p><a href="https://github.com/jekyll/jekyll">github link for jekyll</a></p>

<h3>What is Octopress</h3>

<p>First of all, Octopress is a blogging framework for hackers built on top of jekyll. It has awesome theme with nice understanding workflow for a newbee.</p>

<h3>What we need</h3>

<ol>
<li>Github account</li>
<li>undertstanding about Ruby Programing language</li>
<li>YML and kind of thigs</li>
<li>Any IDE like Sublime Text</li>
</ol>


<h3>Setup Github</h3>

<p>The reason I like GitHub it is super cool and provides free services. We can create public repos free and there is a place for static page too. In order to that need to create a repo name like this
github-user-name.github.io.
github-user-name is the username of your GitHub. Suppose your username is awesome.Repo name is awesome.github.io</p>

<h4>Create new repository</h4>

<p>  for test purpose used a repo named user-name.github.io, here i have used awesome.github.io</p>

<p>  <img src="/images/octopress/1.png" width="600" height="300"></p>

<p>make sure it is a public repository and create repository.
since already have a github.io in my account, I cant use that refer to this answer in stackoverflow.
<a href="https://stackoverflow.com/questions/15563685/can-i-create-more-than-one-repository-for-github-pages">refer link for details</a>.All done from th github account.</p>

<h3>Setup the octopress.</h3>

<p><a href="http://octopress.org/docs/setup/">Refer using the link</a></p>

<ol>
<li><p>before installing octopress, make sure we have the ruby, git installed in our system.</p></li>
<li><p>clone the octopress using below git url</p></li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git clone git://github.com/imathis/octopress.git awesome_blog</span></code></pre></td></tr></table></div></figure>


<ol>
<li>Change to the directory awesome_blog</li>
</ol>


<p><img src="/images/octopress/2.png" width="600" height="300"></p>

<p>4.set the ruby version using rvm</p>

<p><img src="/images/octopress/3.png" width="600" height="300"></p>

<p>5.install the bundler using below command</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem install bundler</span></code></pre></td></tr></table></div></figure>


<p>6.then bundle install</p>

<p><img src="/images/octopress/4.png" width="600" height="300"></p>

<p>7.octopress is bundled with default theme, we can customise later, for now, we will use the default theme.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake install</span></code></pre></td></tr></table></div></figure>


<p><img src="/images/octopress/5.png" width="600" height="300"></p>

<h3>linking GitHub account with Octopress</h3>

<p>To do that we need to run this code.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake setup_github_pages</span></code></pre></td></tr></table></div></figure>


<p>It is actually a rake task will ask the GitHub URL Repo.
here we have</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git@github.com:anoobbava/awesome.github.io.git</span></code></pre></td></tr></table></div></figure>


<p>Also it creates a new remote called octopress. A new branch source is created which contains the updations from our side where as the master contains the static page.</p>

<p><img src="/images/octopress/6.png" width="600" height="300"></p>

<p>Now the process we need to generate a static page from this code, this can be achived using below command.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake generate</span></code></pre></td></tr></table></div></figure>


<p>push this generated static site to the github using the command.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake deploy</span></code></pre></td></tr></table></div></figure>


<p>Now the page is deployed, but the changes are still in the local machine we need to push to source branch.
Which is achieved by</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  git add .
</span><span class='line'>  git commit -m 'commit msg'
</span><span class='line'>  git push origin source</span></code></pre></td></tr></table></div></figure>


<p><em>Note to remember:</em> The static page deployed in the master branch and the code that we changed need to be pushed to source branch.</p>

<p>when we done any changes, and need this change in the production, so the below commands to be executed after every changes occurs.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  rake generate
</span><span class='line'>  rake deploy</span></code></pre></td></tr></table></div></figure>


<p>7.png</p>

<p><img src="/images/octopress/7.png" width="600" height="300"></p>

<p>I have an existing user-name.github.io with account, So i can&rsquo;t create an another one. So I will be explain about the existing github.io account.</p>

<h3>Write a Blog using Octopress</h3>

<p>For that I have switched to my account, you guys can use the user-name.github.io account.</p>

<p>Create a new post using below command.</p>

<pre><code class="`"> rake new_post["post_name"]
</code></pre>

<p> Before creating a blog post, We need to understand that this rake will generate a file in a markdown format and this markdown file will be end with YYYY-MM-DD-post-title.markdown and the path is in source/_posts.</p>

<p> Here I am creating a blog of how to create a blog using octopress and github.</p>

<p><img src="/images/octopress/8.png" width="600" height="300"></p>

<p>The above rake will create a YAML based file which contains below details</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>---
</span><span class='line'>layout: post
</span><span class='line'>title: "Create a Blogging site using Octopress and GitHub"
</span><span class='line'>date: 2017-11-14 19:20:57 +0530
</span><span class='line'>comments: true
</span><span class='line'>categories: 
</span><span class='line'>---</span></code></pre></td></tr></table></div></figure>


<p>All the things are bit straight forward ,only doubt comes from comments: true and the categories. Comments will be discussed later, categories means which all categories this blog will comes, we can provide multiple ones, here I am using below ones only.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>categories: [Ruby, octopress]</span></code></pre></td></tr></table></div></figure>


<p>Now we need to test what is the result is going to come, achieved by using below commands,</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake generate # will make the static file
</span><span class='line'>rake preview # generate a localhost:4000 web browser and we can preview file.</span></code></pre></td></tr></table></div></figure>


<p><img src="/images/octopress/9.png" width="600" height="300"></p>

<h3>Browser result</h3>

<p><img src="/images/octopress/10.png" width="600" height="300"></p>

<p>If we don&rsquo;t want the file to be published and we need to do some path works and design and something and you are in the middle of the blog, then set the</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>published: false</span></code></pre></td></tr></table></div></figure>


<p>to the blog post and it will not publish the page to the blogging site
example:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>blog yml
</span><span class='line'>layout: post
</span><span class='line'>title: "Create a Blogging site using Octopress and GitHub"
</span><span class='line'>date: 2017-11-14 19:20:57 +0530
</span><span class='line'>comments: true
</span><span class='line'>categories: [Ruby, octopress]
</span><span class='line'>published: false</span></code></pre></td></tr></table></div></figure>


<p>then refresh the browser, Hooray the new blog is disappeard.</p>

<p><img src="/images/octopress/11.png" width="600" height="300"></p>

<h3>Sharing code and highlights</h3>

<p>we can use using tilde &ldquo;~&rdquo; symbols for this option.The below option is achived using 3 tilde in one line, then in the next line data and in the next line 3 symbols</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>You are Awesome</span></code></pre></td></tr></table></div></figure>


<p><img src="/images/octopress/12.png" width="300" height="100"></p>

<h4>Display images inside the blog</h4>

<ol>
<li>Place the image in to the blog path/source/images/
2.better to keep a folder for each blog posts inside the images/</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>syntax: {"%img /images/blogfolder/image_name size %"}
</span><span class='line'>example : {"%img /images/octopress/23 600 300 %"}</span></code></pre></td></tr></table></div></figure>


<p>Since we cant use the correct syntax, because octopress executed as command, so Please remove the double quotes inside the braces before using the above syntax.</p>

<h4>Gist inclusion</h4>

<p>If we have more code examples, the preferred is the gist inclusion. Gist is a place where we can store the chunks of code for later use, like the commons rspec for a controllers or ActiveRecord queries etc.
It is Free and from github. Go to the <a href="https://gist.github.com/">ink</a> and create a gist and add to the blog. copy the embeded path starts with the &ldquo;script src&rdquo; and paste inside the blog like below</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;script src="https://gist.github.com/anoobbava/e197d468b7f8d8cc3e404fed9ced1b38.js"&gt;&lt;/script&gt;</span></code></pre></td></tr></table></div></figure>


<p>All of configs are not covered here, Please refer the official octopress blog for details. Happy Blogging all of you, dont forget that once you completed, then do the below steps to complete</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake generate
</span><span class='line'>rake deploy
</span><span class='line'>rake add .
</span><span class='line'>git commit -m 'Completed the blog about the octopress'
</span><span class='line'>git push origin source</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/10/24/introduction-to-circle-ci/">Introduction to Circle CI</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-10-24T20:06:55+05:30'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>24</span><span class='date-suffix'>th</span>, <span class='date-year'>2017</span></span> <span class='time'>8:06 pm</span></time>
        
           | <a href="/blog/2017/10/24/introduction-to-circle-ci/#disqus_thread"
             data-disqus-identifier="http://anoobbava.github.io/blog/2017/10/24/introduction-to-circle-ci/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Intro &amp;&amp; Setup Project</h2>

<p>CircleCI helps you ship better code, faster. To kick things off, you&rsquo;ll need to add a config.yml file to your project, and start building. After that, we&rsquo;ll start a new build for you each time make a PR. Similar to travis; here also needed a yml file for configs and update.</p>

<h2>Steps</h2>

<p>1.Signup using github</p>

<p><img src="/images/circleci/intro.png" width="800" height="300"></p>

<ol>
<li>Add our Project</li>
</ol>


<p><img src="/images/circleci/add_project.png" width="800" height="300"></p>

<ol>
<li><p>Create a folder named .circleci and add a fileconfig.yml (so that the filepath in .circleci/config.yml).</p></li>
<li><p>Populate the config.yml with the contents of the below file.</p></li>
</ol>


<script src="https://gist.github.com/anoobbava/2c9417987a3e67210395119aa5083c48.js"></script>


<ol>
<li><p>Update the config.yml to reflect your project&rsquo;s configuration.</p></li>
<li><p>Push this change to GitHub.</p></li>
<li><p>Start building! This will launch your project on Circle CI , now it will analyse the code and check the system for PR.all done, system will automatically test when make our PR.</p></li>
</ol>


<p><img src="/images/circleci/circle_Pr.png" width="800" height="300"></p>

<p>Awesome, we got our error on build we can see what is the error.</p>

<p><img src="/images/circleci/circle_error_pr.png" width="800" height="300"></p>

<p>The issue is we have mentioned is ruby in gem file as 2.3.1 but in the config of circle is 2.4.1. we will update it as another commit.</p>

<p>I Found it, circle CI using docker images pre-built ones, Here we are using the ruby version 2.3.1 in Gemfile and the config.yml added 2.4.1. Going the below url
<a href="https://circleci.com/docs/2.0/circleci-images/#ruby">go to circle docs info</a>
- most matched version is 2.3; now we are commiting using that code. All work fine.Now we select the image,
We can select linux, IOS, or custom host in circle CI, For this tutorial I have used the linux plan, hobbyist one. We can use containers.</p>

<p><img src="/images/circleci/circle_all_test_passed.png" width="800" height="300"></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/10/17/continous-integration-using-travis/">Continous Integration Using Travis CI</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-10-17T23:57:58+05:30'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>17</span><span class='date-suffix'>th</span>, <span class='date-year'>2017</span></span> <span class='time'>11:57 pm</span></time>
        
           | <a href="/blog/2017/10/17/continous-integration-using-travis/#disqus_thread"
             data-disqus-identifier="http://anoobbava.github.io/blog/2017/10/17/continous-integration-using-travis/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Why Travis CI</h2>

<p>Before you start in to our CI, one must understand what is CI and why the CI is going to help us the development and what is a <em>DevOps</em>.</p>

<p><img src="/images/travis_logo.png" width="600" height="300"></p>

<h2>DevOps</h2>

<ul>
<li>Is a combination of cultural philosophies.</li>
<li>combined to do deviler the products at High Speed.</li>
<li>development and operations teams are no longer &ldquo;siloed.&rdquo;(AWS)</li>
<li>Technology is in path we can minimise the effort and reduce the bugs from the existing system.</li>
<li>DevOps help us to achive better results in minimal Time.</li>
<li>when Continous Integration and Continous Delivery makes us to reduce the development time.</li>
</ul>


<!-- ![devops](images/travis_devops.jpeg) -->


<p><img src="/images/travis_devops.jpeg" width="500" height="300"></p>

<h2>CI(Continous Integration)</h2>

<ul>
<li>Is a development practice.</li>
<li>requires developers to share the code to a common repository.</li>
<li>Each code update is tested by automated build.</li>
<li>if only the automated build is succeeded, then the code is updated to the system.</li>
<li>we have Travis CI, Circle CI for this task.</li>
</ul>


<h2>Travis CI intro</h2>

<ul>
<li>Simple and powerful tool for the CI.</li>
<li>Always free for the Open source repository.</li>
<li>Test and deploy with Confidence.(motto)</li>
<li><a href="https://www.travis-ci.org/">go to Travis</a></li>
<li>facebook and Rails are using this.</li>
</ul>


<h3>workflow</h3>

<!-- ![work flow](images/travis_work_flow.png) -->


<p><img src="/images/travis_work_flow.png" width="1000" height="800"></p>

<h3>PR work flow</h3>

<!-- ![PR flow](images/travis_pr_workflow.png)  -->


<p><img src="/images/travis_pr_workflow.png" width="1000" height="800"></p>

<h2>prerequisites</h2>

<ul>
<li>Active Github Account.</li>
<li>Need to link to Github repo with Travis CI.</li>
<li>test coverage for system.</li>
</ul>


<p>Here we are testing for Ruby on rails.To test our project has test coverage we are using the simplecov gem.Testing using SimpleCov is explained in this <a href="https://anoobbava.wordpress.com/2017/10/03/find-test-coverage-locally/">link</a></p>

<!-- ![simple cov](images/travis_simple_cov.png) -->


<p><img src="/images/travis_simple_cov.png" width="1000" height="800"></p>

<h2>Back in Action</h2>

<p>Next thing what we do is to Login with Github</p>

<!-- ![github login](images/travis_sigin-with-gituhb.png) -->


<p><img src="/images/travis_sigin-with-gituhb.png" width="500" height="200"></p>

<p>All the gitHub Repo&rsquo;s are synched to the Travis-CI.Now Turn ON the Switch against the Repos. We need to update a YML file for travis to automate the testing.There is an online tool to validate the Travis YML using this <a href="https://lint.travis-ci.org/">link</a>.Right now we are discussing only the simple ones for start.</p>

<h2>Sample YML</h2>

<p>In order to function the Travis and install the depandancies, need a config file. travis.yml is that kind of file will help us to implement that feature. Below is sample file. There are other numerous configs, here is the basic to start and running.</p>

<script src="https://gist.github.com/anoobbava/712777537f3d2653db2819b5add3402c.js"></script>


<p>Mentioned only the Ruby and the Version. Also before starting our testing, we need to setup a test database.The reason is we don&rsquo;t want to test the production dB by any chance. Now comes the script part, we are migrating the database to the latest structure and running the rspecs.I have used the codeclimate.</p>

<h2>Why Codeclimate</h2>

<p>codeclimate is a code analysis engine will help to check the code has any issues using gems like breakman and rubocop.Also it has built in analysis engine will help us to analyse the code test coverage and also numerous features like badge for our GitHub account. signup using your Github and authorise access codeclimate to our repo. An advantage is that for opensource repo; the codeclimate is free for lifetime, Cool and Awesome right, thanks to codeclimate for their services.
Login to codeclimate account and goto our repo, settings tab> Test Coverage. there is a token is present. This token is a link between Travis CI and codeclimate.
<img src="/images/travis_test_coverage_cc.png" width="1000" height="800">
Now see the magic, login to our travis account, goto our project> more options > settings > Environment Variables
<img src="/images/travis_environment.png" width="1000" height="800"></p>

<p>create a new environment variable CODECLIMATE_REPO_TOKEN and copy the value from the codeclimate account.</p>

<p>All Set, now only simple task is copy the same token to the .travis.yml file also where XX marked.</p>

<p>note : I am taking the images from my another project for clarity, do not need to confuse with that :D</p>

<script src="https://gist.github.com/anoobbava/79bfabda8e9ef4fdf35f75161920d0ae.js"></script>


<p>Dont forget to add this gems our test group.</p>

<p>checkout the below the code if any doubts with the spec_helper.</p>

<script src="https://gist.github.com/anoobbava/e197d468b7f8d8cc3e404fed9ced1b38.js"></script>


<p>. Next is commit this code and push to master. We can config the travis to run only at the time of PR(Settings of Travis CI corresponding project).
Need to check the settings of the travis-ci of particular repo, like when the build started or start build only when the yml is present like that.</p>

<!-- ![Travis config](images/travis_settings.png) -->


<p><img src="/images/travis_settings.png" width="800" height="200"></p>

<h4>Now it is check-in time.Add the code and made a PR</h4>

<!-- ![checkin the code](images/travis_checkin.png) -->


<p><img src="/images/travis_checkin.png" width="600" height="200"></p>

<h4>After made PR, the Travis-CI is analysing the code</h4>

<!-- ![travis pr checking](images/travis_pr_checking.png) -->


<p><img src="/images/travis_checkin.png" width="600" height="200"></p>

<h4>we can see the status of PR by clicking on the see details from gitHub page.</h4>

<!-- ![travis success](images/travis_success.png) -->


<p><img src="/images/travis_success.png" width="600" height="200"></p>

<h4>Hooray, all success, now we can see the detailed log for details.</h4>

<!-- ![travis log](images/travis_log.png) -->


<p><img src="/images/travis_log.png" width="800" height="300"></p>

<p>Image courtesy: <a href="https://www.travis-ci.org/">travis</a></p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2018/04/11/rails-app-deployment-using-gcp/">Rails App Deployment Using GCP:Series 1</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/03/28/upload-images-using-cloudinary-in-heroku/">Upload Images Using Cloudinary in Heroku</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/03/27/automatically-run-the-migrations-in-heroku/">Automatically Run the Migrations in Heroku</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/03/22/create-custom-error-pages-in-rails/">Create Custom Error Pages in Rails</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/03/16/allow-mutiple-images-via-carrierwave/">Allow Mutiple Images via Carrierwave</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/anoobbava">@anoobbava</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'anoobbava',
            count: ,
            skip_forks: ,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/anoob.bava?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2018 - Anoob Bava -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'https-anoobbava-github-io';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
